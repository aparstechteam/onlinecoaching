import{o as l,c,f as t,t as m,g as h,w as d,v as p,n as u,h as g}from"./vendor.5e127582.js";import{_ as x}from"./onco.a5f27177.js";import{_}from"./index.28f21908.js";var f="/onlinecoaching/assets/logo.1e7e3854.svg";const y={name:"LoginFrom",beforeRouteEnter(o,e,a){if(!JSON.parse(localStorage.getItem("10msexam"))){a();return}a({path:"/"})},data(){return{examdata:null,phone:"01",user:null,attempt:0,loading:!1}},methods:{initializePage(){fetch("https://script.google.com/macros/s/AKfycbylTXudJbXrOvBQ2gqcWmvj0QuYhxcvbEotbSnRXp0EtbNpxx72inA5Fcq9P2dfseeX/exec?type=exams&id="+this.$route.params.exam_id).then(o=>o.json()).then(o=>{this.examdata=o})},async validatePayment(){this.loading=!0;let o=this.phone.length,e="0"+this.phone.substring(o-10,o);try{let i=await(await fetch(`https://script.google.com/macros/s/AKfycbwa3t3EJ8UItR9Z8U8N20IOlshG1dowTXODtNBDrU6bekv2aziXOe0FmDhNYT-EkFl2/exec?prod_id=${this.$route.params.prod_id}&phone=${e}`)).json();i.purchased?(this.user=i.trans[0],this.insertRow()):(this.loading=!1,this.$swal({icon:"warning",title:"Wrong Credential",text:"Please try again with valid data"}))}catch{this.login_alert_msg="An Unexpected error occurred. Please try again later.";return}this.attempt++},goToExam(){fetch("https://script.google.com/macros/s/AKfycbzh8PMJhIenQbfayPDSffdsylmdu6SMTxuiB8gbvaOeGPCzZowqUe30JAGgR9TUmd2o/exec",{method:"POST",mode:"no-cors",cache:"no-cache",redirect:"follow",body:JSON.stringify({row:[new Date().toLocaleString(),this.phone,"","","",this.attempt]})}).then(()=>{location.replace(this.examdata.exam.link)})},insertRow(){let{cust_id:o,name:e,prod_id:a,title:i,tenms_id:s}=this.user;fetch("https://script.google.com/macros/s/AKfycbzh8PMJhIenQbfayPDSffdsylmdu6SMTxuiB8gbvaOeGPCzZowqUe30JAGgR9TUmd2o/exec",{method:"POST",mode:"no-cors",cache:"no-cache",redirect:"follow",body:JSON.stringify({row:[new Date().toLocaleString(),this.phone,o,s,e,this.attempt,i,a,this.$route.params.exam_id]})}).then(()=>{location.replace(this.examdata.exam.link)})}},created(){this.initializePage()}},b={key:0,class:"poppins min-h-screen gap-4 container mx-auto py-20"},v=t("div",{class:"my-5"},[t("img",{src:f,class:"h-6 mb-2 mx-auto",alt:""}),t("img",{src:x,alt:"10minuteschool",class:"h-20 mx-auto"})],-1),w={class:"text-center text-2xl my-2"},P={key:0},S={class:"my-5 text-center space-y-3"},X=t("h1",{class:"text-2xl"},"Do u want to continue without confirming identity?",-1),T=t("h3",{class:"text-xl text-red-500"},"You will not be eligiable to get any gift.",-1),E={class:"form-control max-w-md mx-auto"},O=t("label",{for:"",class:"label"},[t("span",{class:"label-text"},"Enter your phone Number")],-1),k={class:"my-5 text-center"},D={key:1,class:"py-20 text-center"},N=t("button",{class:"btn btn-circle loading"},null,-1),A=[N];function J(o,e,a,i,s,r){return s.examdata?(l(),c("div",b,[v,t("h2",w,m(s.examdata.exam.title),1),s.attempt>2?(l(),c("div",P,[t("div",S,[X,T,t("button",{class:"btn btn-success",onClick:e[0]||(e[0]=(...n)=>r.goToExam&&r.goToExam(...n))},"Continue")])])):h("",!0),t("form",{onSubmit:e[2]||(e[2]=g((...n)=>r.validatePayment&&r.validatePayment(...n),["prevent"]))},[t("div",E,[O,d(t("input",{type:"tel",placeholder:"01XXXXXXXXX",required:"",name:"phone",class:"input input-bordered","onUpdate:modelValue":e[1]||(e[1]=n=>s.phone=n)},null,512),[[p,s.phone]])]),t("div",k,[t("button",{class:u(["btn",{loading:s.loading}])},"Enter",2)])],32)])):(l(),c("div",D,A))}var C=_(y,[["render",J]]);export{C as default};
