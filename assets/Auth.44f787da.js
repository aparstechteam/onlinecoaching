import{o as l,c,w as d,f as t,g as m,v as h,n as p}from"./vendor.7822f41c.js";import{_ as u}from"./onco.095ceaad.js";import{_ as x}from"./index.11f4989d.js";const g={name:"LoginFrom",beforeRouteEnter(s,e,o){if(!JSON.parse(localStorage.getItem("10msexam"))){o();return}o({path:"/"})},data(){return{examdata:null,phone:"01",user:null,attempt:0,loading:!1}},methods:{initializePage(){fetch("https://script.google.com/macros/s/AKfycbylTXudJbXrOvBQ2gqcWmvj0QuYhxcvbEotbSnRXp0EtbNpxx72inA5Fcq9P2dfseeX/exec?type=exams&id="+this.$route.params.exam_id).then(s=>s.json()).then(s=>{this.examdata=s})},async validatePayment(){if(this.attempt++,this.loading=!0,this.attempt<4){let s=this.phone.length,e="0"+this.phone.substring(s-10,s);try{let a=await(await fetch(`https://script.google.com/macros/s/AKfycbwcPMOtnHQWcjnr_SD8gxPYiQ1l9kZZ3Fwlrf2QzKX9auGKoBIIoWwZIYCKemq2bsO4/exec?prod_id=${this.$route.params.prod_id}&phone=${e}`)).json();a.purchased?(this.user=a.trans[0],this.insertRow()):(this.loading=!1,this.$swal({icon:"warning",title:"Wrong Credential",text:"Please try again with valid data"}))}catch{this.login_alert_msg="An Unexpected error occurred. Please try again later.";return}}},goToExam(){location.replace(this.examdata.exam.link)},insertRow(){let{cust_id:s,name:e,prod_id:o,title:a}=this.user;fetch("https://script.google.com/macros/s/AKfycbzh8PMJhIenQbfayPDSffdsylmdu6SMTxuiB8gbvaOeGPCzZowqUe30JAGgR9TUmd2o/exec",{method:"POST",mode:"no-cors",cache:"no-cache",redirect:"follow",body:JSON.stringify({row:[s,e,a,o,this.$route.params.exam_id]})}).then(()=>{location.replace(this.examdata.exam.link)})}},created(){this.initializePage()}},_={key:0,class:"poppins min-h-screen gap-4 container mx-auto py-20"},f=t("div",{class:"my-5"},[t("img",{src:u,alt:"10minuteschool",class:"h-20 mx-auto"})],-1),y={class:"form-control max-w-md mx-auto"},b=t("label",{for:"",class:"label"},[t("span",{class:"label-text"},"Enter your phone Number")],-1),v={class:"my-5 text-center"},w={key:1},P={class:"my-5 text-center space-y-3"},X=t("h1",{class:"text-2xl"},"Do u want to continue without confirmation identity?",-1),k=t("h3",{class:"text-xl text-red-500"},"You are not eligiable to get any gift.",-1),E={key:1,class:"py-20 text-center"},S=t("button",{class:"btn btn-circle loading"},null,-1),T=[S];function A(s,e,o,a,i,r){return i.examdata?(l(),c("div",_,[f,i.attempt<3?(l(),c("form",{key:0,onSubmit:e[1]||(e[1]=d((...n)=>r.validatePayment&&r.validatePayment(...n),["prevent"]))},[t("div",y,[b,m(t("input",{type:"tel",placeholder:"01XXXXXXXXX",required:"",name:"phone",class:"input input-bordered","onUpdate:modelValue":e[0]||(e[0]=n=>i.phone=n)},null,512),[[h,i.phone]])]),t("div",v,[t("button",{class:p(["btn",{loading:i.loading}])},"Enter",2)])],32)):(l(),c("div",w,[t("div",P,[X,k,t("button",{class:"btn btn-success",onClick:e[2]||(e[2]=(...n)=>r.goToExam&&r.goToExam(...n))},"Continue")])]))])):(l(),c("div",E,T))}var C=x(g,[["render",A]]);export{C as default};
