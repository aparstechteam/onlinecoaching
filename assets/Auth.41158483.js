import{o as l,c,f as e,g as m,w as d,v as h,n as p,h as u}from"./vendor.7c4b41c5.js";import{_ as g}from"./onco.a5f27177.js";import{_ as x}from"./index.8c7ff1fb.js";var _="/onlinecoaching/assets/logo.1e7e3854.svg";const f={name:"LoginFrom",beforeRouteEnter(s,t,o){if(!JSON.parse(localStorage.getItem("10msexam"))){o();return}o({path:"/"})},data(){return{examdata:null,phone:"01",user:null,attempt:0,loading:!1}},methods:{initializePage(){fetch("https://script.google.com/macros/s/AKfycbylTXudJbXrOvBQ2gqcWmvj0QuYhxcvbEotbSnRXp0EtbNpxx72inA5Fcq9P2dfseeX/exec?type=exams&id="+this.$route.params.exam_id).then(s=>s.json()).then(s=>{this.examdata=s})},async validatePayment(){this.loading=!0;let s=this.phone.length,t="0"+this.phone.substring(s-10,s);try{let a=await(await fetch(`https://script.google.com/macros/s/AKfycbwcPMOtnHQWcjnr_SD8gxPYiQ1l9kZZ3Fwlrf2QzKX9auGKoBIIoWwZIYCKemq2bsO4/exec?prod_id=${this.$route.params.prod_id}&phone=${t}`)).json();a.purchased?(this.user=a.trans[0],this.insertRow()):(this.loading=!1,this.$swal({icon:"warning",title:"Wrong Credential",text:"Please try again with valid data"}))}catch{this.login_alert_msg="An Unexpected error occurred. Please try again later.";return}this.attempt++},goToExam(){location.replace(this.examdata.exam.link)},insertRow(){let{cust_id:s,name:t,prod_id:o,title:a}=this.user;fetch("https://script.google.com/macros/s/AKfycbzh8PMJhIenQbfayPDSffdsylmdu6SMTxuiB8gbvaOeGPCzZowqUe30JAGgR9TUmd2o/exec",{method:"POST",mode:"no-cors",cache:"no-cache",redirect:"follow",body:JSON.stringify({row:[s,t,a,o,this.$route.params.exam_id]})}).then(()=>{location.replace(this.examdata.exam.link)})}},created(){this.initializePage()}},b={key:0,class:"poppins min-h-screen gap-4 container mx-auto py-20"},y=e("div",{class:"my-5"},[e("img",{src:_,class:"h-6 mb-2 mx-auto",alt:""}),e("img",{src:g,alt:"10minuteschool",class:"h-20 mx-auto"})],-1),v={key:0},w={class:"my-5 text-center space-y-3"},P=e("h1",{class:"text-2xl"},"Do u want to continue without confirming identity?",-1),X=e("h3",{class:"text-xl text-red-500"},"You will not be eligiable to get any gift.",-1),k={class:"form-control max-w-md mx-auto"},E=e("label",{for:"",class:"label"},[e("span",{class:"label-text"},"Enter your phone Number")],-1),S={class:"my-5 text-center"},T={key:1,class:"py-20 text-center"},A=e("button",{class:"btn btn-circle loading"},null,-1),C=[A];function O(s,t,o,a,i,r){return i.examdata?(l(),c("div",b,[y,i.attempt>2?(l(),c("div",v,[e("div",w,[P,X,e("button",{class:"btn btn-success",onClick:t[0]||(t[0]=(...n)=>r.goToExam&&r.goToExam(...n))},"Continue")])])):m("",!0),e("form",{onSubmit:t[2]||(t[2]=u((...n)=>r.validatePayment&&r.validatePayment(...n),["prevent"]))},[e("div",k,[E,d(e("input",{type:"tel",placeholder:"01XXXXXXXXX",required:"",name:"phone",class:"input input-bordered","onUpdate:modelValue":t[1]||(t[1]=n=>i.phone=n)},null,512),[[h,i.phone]])]),e("div",S,[e("button",{class:p(["btn",{loading:i.loading}])},"Enter",2)])],32)])):(l(),c("div",T,C))}var N=x(f,[["render",O]]);export{N as default};
